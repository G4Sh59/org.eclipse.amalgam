<?xml version="1.0" encoding="UTF-8"?>
<project name="modeler" default="main" xmlns:zzz="eclipse.org/gmf/2008/xpand">
	
	<target name="main" depends="update.product,invoke.templates">
		<eclipse.refreshLocal resource="org.eclipse.amalgam.releng.builder" depth="infinite"/>
	</target>
		
	<target name="update.product">
		<qvto.interpretedTransformation
		     transformation="platform:/plugin/org.eclipse.amalgam.releng.builder/transformations/updateproduct.qvto">
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.product"/>
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.build"/>
		</qvto.interpretedTransformation>
		<copy file="../configs/modeler/modeler.product" todir="../out/build/modeler/builder" overwrite="true"/>
	</target>

	<target name="invoke.templates">
		<mkdir dir="../out/build/modeler/repo"/>
		<zzz:template name="build2properties::Main" 
			inputURI="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.build#/" 
			templateroot="platform:/plugin/org.eclipse.amalgam.releng.builder/templates/"
			outfile="../out/build/modeler/builder/build.properties"/>
		<zzz:template name="build2customTargets::Main" 
			inputURI="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.build#/" 
			templateroot="platform:/plugin/org.eclipse.amalgam.releng.builder/templates/"
			outfile="../out/build/modeler/builder/customTargets.xml"/>
		<zzz:template name="build2script::Main" 
			inputURI="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.build#/" 
			templateroot="platform:/plugin/org.eclipse.amalgam.releng.builder/templates/"
			outfile="../out/build/build-modeler.xml"/>
		<zzz:template name="build2site::Main" 
			inputURI="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.build#/" 
			templateroot="platform:/plugin/org.eclipse.amalgam.releng.builder/templates/"
			outfile="../out/build/modeler/repo/site.xml"/>
	</target>

</project>