<?xml version="1.0" encoding="UTF-8"?>
<project name="workflows/build2script.exec" default="invokeAll" basedir="." xmlns:xpt="borland:xpand.exec.dsl/2007" xmlns:dsl="borland:exec.dsl/2007" xmlns:fs="borland:resource.exec.dsl/2007" >

<dsl:templateset id="tset1" url="platform:/resource/org.eclipse.amalgam.releng.builder/templates"/>
<fs:input uri="platform:/resource/org.eclipse.amalgam.releng.builder/configs/galileo/galileo.build" id="input1"/>
<fs:input uri="platform:/resource/org.eclipse.amalgam.releng.builder/configs/galileo/galileo.product"/>

	<target name="invokeAll" depends="update.product,gen.customTargets.xml,gen.build.properties,gen.build.xml,gen.site.xml"/>
	
	<target name="update.product">
		<qvto.interpretedTransformation
		     transformation="platform:/resource/org.eclipse.amalgam.releng.builder/transformations/updateproduct.qvto">
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/galileo/galileo.product"/>
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/galileo/galileo.build"/>
		</qvto.interpretedTransformation>
		<copy file="../configs/galileo/galileo.product" todir="../out/build/galileo/builder" overwrite="true"/>
		<qvto.interpretedTransformation
		     transformation="platform:/resource/org.eclipse.amalgam.releng.builder/transformations/updateproduct.qvto">
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/dsltk/dsltk.product"/>
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/dsltk/dsltk.build"/>
		</qvto.interpretedTransformation>
		<copy file="../configs/dsltk/dsltk.product" todir="../out/build/dsltk/builder" overwrite="true"/>
		<qvto.interpretedTransformation
		     transformation="platform:/resource/org.eclipse.amalgam.releng.builder/transformations/updateproduct.qvto">
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.product"/>
		     <targeturidef targeturi="platform:/resource/org.eclipse.amalgam.releng.builder/configs/modeler/modeler.build"/>
		</qvto.interpretedTransformation>
		<copy file="../configs/modeler/modeler.product" todir="../out/build/modeler/builder" overwrite="true"/>
	</target>
	
	<target name="gen.customTargets.xml">
	   	<xpt:template name="build2customTargets::Main" templateset="tset1">
       		<xpt:selector refid="input1" expression="this.first()"/>
       		<fs:destfile value="platform:/resource/org.eclipse.amalgam.releng.builder/out/build/galileo/builder/customTargets.xml"/>
   		</xpt:template>
	</target>

	<target name="gen.build.properties">
	   	<xpt:template name="build2properties::Main" templateset="tset1">
			<xpt:selector refid="input1" expression="this.first()"/>
   	       	<fs:destfile value="platform:/resource/org.eclipse.amalgam.releng.builder/out/build/galileo/builder/build.properties"/>
	   	</xpt:template>
	</target>

	<target name="gen.build.xml">
	   	<xpt:template name="build2script::Main" templateset="tset1">       	
			<xpt:selector refid="input1" expression="this.first()"/>
       	    <fs:destfile value="platform:/resource/org.eclipse.amalgam.releng.builder/out/build/build-galileo.xml"/>
   		</xpt:template>
	</target>

	<target name="gen.site.xml">
   		<xpt:template name="build2site::Main" templateset="tset1"> 	
			<xpt:selector refid="input1" expression="this.first()"/>
   	       	<fs:destfile value="platform:/resource/org.eclipse.amalgam.releng.builder/out/build/galileo/repo/site.xml"/>
	   	</xpt:template>
	</target>
	
</project>
